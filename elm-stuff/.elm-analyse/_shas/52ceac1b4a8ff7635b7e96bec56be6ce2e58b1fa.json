{"moduleDefinition":{"range":[1,1,1,28],"value":{"type":"normal","normal":{"moduleName":{"range":[1,8,1,14],"value":["Update"]},"exposingList":{"range":[1,15,1,28],"value":{"type":"all","all":[1,25,1,27]}}}}},"imports":[{"range":[3,1,3,29],"value":{"moduleName":{"range":[3,8,3,15],"value":["Message"]},"moduleAlias":null,"exposingList":{"range":[3,16,3,29],"value":{"type":"all","all":[3,26,3,28]}}}},{"range":[4,1,4,27],"value":{"moduleName":{"range":[4,8,4,13],"value":["Model"]},"moduleAlias":null,"exposingList":{"range":[4,14,4,27],"value":{"type":"all","all":[4,24,4,26]}}}},{"range":[5,1,5,30],"value":{"moduleName":{"range":[5,8,5,17],"value":["AnimState"]},"moduleAlias":null,"exposingList":{"range":[5,18,5,30],"value":{"type":"all","all":[5,27,5,29]}}}},{"range":[6,1,6,31],"value":{"moduleName":{"range":[6,8,6,17],"value":["Collision"]},"moduleAlias":null,"exposingList":{"range":[6,18,6,31],"value":{"type":"all","all":[6,28,6,30]}}}},{"range":[7,1,7,26],"value":{"moduleName":{"range":[7,8,7,12],"value":["Text"]},"moduleAlias":null,"exposingList":{"range":[7,13,7,26],"value":{"type":"all","all":[7,23,7,25]}}}},{"range":[8,1,8,29],"value":{"moduleName":{"range":[8,8,8,15],"value":["Animate"]},"moduleAlias":null,"exposingList":{"range":[8,16,8,29],"value":{"type":"all","all":[8,26,8,28]}}}},{"range":[9,1,9,32],"value":{"moduleName":{"range":[9,8,9,18],"value":["MapSetting"]},"moduleAlias":null,"exposingList":{"range":[9,19,9,32],"value":{"type":"all","all":[9,29,9,31]}}}}],"declarations":[{"range":[12,1,63,32],"value":{"type":"function","function":{"documentation":null,"signature":{"range":[12,1,12,42],"value":{"name":{"range":[12,1,12,7],"value":"update"},"typeAnnotation":{"range":[12,10,12,42],"value":{"type":"function","function":{"left":{"range":[12,10,12,13],"value":{"type":"typed","typed":{"moduleNameAndName":{"range":[12,10,12,13],"value":{"moduleName":[],"name":"Msg"}},"args":[]}}},"right":{"range":[12,17,12,42],"value":{"type":"function","function":{"left":{"range":[12,17,12,22],"value":{"type":"typed","typed":{"moduleNameAndName":{"range":[12,17,12,22],"value":{"moduleName":[],"name":"Model"}},"args":[]}}},"right":{"range":[12,26,12,42],"value":{"type":"tupled","tupled":{"values":[{"range":[12,27,12,32],"value":{"type":"typed","typed":{"moduleNameAndName":{"range":[12,27,12,32],"value":{"moduleName":[],"name":"Model"}},"args":[]}}},{"range":[12,34,12,41],"value":{"type":"typed","typed":{"moduleNameAndName":{"range":[12,34,12,37],"value":{"moduleName":[],"name":"Cmd"}},"args":[{"range":[12,38,12,41],"value":{"type":"typed","typed":{"moduleNameAndName":{"range":[12,38,12,41],"value":{"moduleName":[],"name":"Msg"}},"args":[]}}}]}}}]}}}}}}}}}}},"declaration":{"range":[13,1,63,32],"value":{"name":{"range":[13,1,13,7],"value":"update"},"arguments":[{"range":[13,8,13,11],"value":{"type":"var","var":{"value":"msg"}}},{"range":[13,12,13,17],"value":{"type":"var","var":{"value":"model"}}}],"expression":{"range":[14,5,63,32],"value":{"type":"case","case":{"cases":[{"pattern":{"range":[15,9,15,33],"value":{"type":"named","named":{"qualified":{"moduleName":[],"name":"GetViewport"},"patterns":[{"range":[15,21,15,33],"value":{"type":"record","record":{"value":[{"range":[15,23,15,31],"value":"viewport"}]}}}]}}},"expression":{"range":[16,13,20,14],"value":{"type":"tupled","tupled":[{"range":[16,15,18,16],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[16,17,16,22],"value":"model"},"updates":[{"range":[17,19,18,15],"value":{"field":{"range":[17,19,17,23],"value":"size"},"expression":{"range":[17,26,17,63],"value":{"type":"application","application":[{"range":[17,26,17,32],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"Vector"}}},{"range":[17,41,17,47],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[17,33,17,41],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"viewport"}}},"name":{"range":[17,42,17,47],"value":"width"}}}},{"range":[17,56,17,63],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[17,48,17,56],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"viewport"}}},"name":{"range":[17,57,17,63],"value":"height"}}}}]}}}}]}}},{"range":[19,15,19,23],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}}},{"pattern":{"range":[22,9,22,28],"value":{"type":"named","named":{"qualified":{"moduleName":[],"name":"Resize"},"patterns":[{"range":[22,16,22,21],"value":{"type":"var","var":{"value":"width"}}},{"range":[22,22,22,28],"value":{"type":"var","var":{"value":"height"}}}]}}},"expression":{"range":[23,13,27,14],"value":{"type":"tupled","tupled":[{"range":[23,15,25,18],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[23,17,23,22],"value":"model"},"updates":[{"range":[24,19,25,17],"value":{"field":{"range":[24,19,24,23],"value":"size"},"expression":{"range":[24,26,24,66],"value":{"type":"application","application":[{"range":[24,26,24,32],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"Vector"}}},{"range":[24,33,24,48],"value":{"type":"parenthesized","parenthesized":{"range":[24,34,24,47],"value":{"type":"application","application":[{"range":[24,34,24,41],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"toFloat"}}},{"range":[24,42,24,47],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"width"}}}]}}}},{"range":[24,49,24,66],"value":{"type":"parenthesized","parenthesized":{"range":[24,50,24,64],"value":{"type":"application","application":[{"range":[24,50,24,57],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"toFloat"}}},{"range":[24,58,24,64],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"height"}}}]}}}}]}}}}]}}},{"range":[26,15,26,23],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}}},{"pattern":{"range":[29,9,29,34],"value":{"type":"named","named":{"qualified":{"moduleName":[],"name":"AnimWalk"},"patterns":[{"range":[29,18,29,31],"value":{"type":"var","var":{"value":"moveDirection"}}},{"range":[29,32,29,34],"value":{"type":"var","var":{"value":"on"}}}]}}},"expression":{"range":[30,13,45,9],"value":{"type":"ifBlock","ifBlock":{"clause":{"range":[30,16,30,48],"value":{"type":"application","application":[{"range":[30,16,30,18],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"on"}}},{"range":[30,19,30,21],"value":{"type":"operator","operator":"&&"}},{"range":[30,34,30,39],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[30,27,30,34],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[30,22,30,27],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[30,28,30,34],"value":"player"}}}},"name":{"range":[30,35,30,39],"value":"anim"}}}},{"range":[30,40,30,42],"value":{"type":"operator","operator":"=="}},{"range":[30,43,30,48],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"Stand"}}}]}},"then":{"range":[31,17,33,28],"value":{"type":"tupled","tupled":[{"range":[31,18,33,18],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[31,19,31,24],"value":"model"},"updates":[{"range":[32,21,33,17],"value":{"field":{"range":[32,21,32,27],"value":"player"},"expression":{"range":[32,33,32,62],"value":{"type":"application","application":[{"range":[32,33,32,40],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[32,28,32,33],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[32,34,32,40],"value":"player"}}}},{"range":[32,41,32,43],"value":{"type":"operator","operator":"|>"}},{"range":[32,44,32,48],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"walk"}}},{"range":[32,49,32,62],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"moveDirection"}}}]}}}}]}}},{"range":[33,19,33,27],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}},"else":{"range":[34,18,45,9],"value":{"type":"ifBlock","ifBlock":{"clause":{"range":[34,21,34,53],"value":{"type":"application","application":[{"range":[34,21,34,23],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"on"}}},{"range":[34,24,34,26],"value":{"type":"operator","operator":"&&"}},{"range":[34,39,34,44],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[34,32,34,39],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[34,27,34,32],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[34,33,34,39],"value":"player"}}}},"name":{"range":[34,40,34,44],"value":"anim"}}}},{"range":[34,45,34,47],"value":{"type":"operator","operator":"=="}},{"range":[34,47,34,53],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"Charge"}}}]}},"then":{"range":[35,17,37,28],"value":{"type":"tupled","tupled":[{"range":[35,18,37,18],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[35,19,35,24],"value":"model"},"updates":[{"range":[36,21,37,17],"value":{"field":{"range":[36,21,36,27],"value":"player"},"expression":{"range":[36,33,36,71],"value":{"type":"application","application":[{"range":[36,33,36,40],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[36,28,36,33],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[36,34,36,40],"value":"player"}}}},{"range":[36,41,36,43],"value":{"type":"operator","operator":"|>"}},{"range":[36,44,36,57],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"jumpdirection"}}},{"range":[36,58,36,71],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"moveDirection"}}}]}}}}]}}},{"range":[37,19,37,27],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}},"else":{"range":[38,18,45,9],"value":{"type":"ifBlock","ifBlock":{"clause":{"range":[38,21,38,85],"value":{"type":"application","application":[{"range":[38,21,38,24],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"not"}}},{"range":[38,25,38,27],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"on"}}},{"range":[38,28,38,30],"value":{"type":"operator","operator":"&&"}},{"range":[38,43,38,48],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[38,36,38,43],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[38,31,38,36],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[38,37,38,43],"value":"player"}}}},"name":{"range":[38,44,38,48],"value":"anim"}}}},{"range":[38,49,38,51],"value":{"type":"operator","operator":"/="}},{"range":[38,52,38,56],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"Jump"}}},{"range":[38,57,38,59],"value":{"type":"operator","operator":"&&"}},{"range":[38,78,38,80],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[38,72,38,78],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[38,65,38,72],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[38,60,38,65],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[38,66,38,72],"value":"player"}}}},"name":{"range":[38,73,38,78],"value":"speed"}}}},"name":{"range":[38,79,38,80],"value":"y"}}}},{"range":[38,81,38,83],"value":{"type":"operator","operator":"=="}},{"range":[38,84,38,85],"value":{"type":"integer","integer":0}}]}},"then":{"range":[39,17,41,28],"value":{"type":"tupled","tupled":[{"range":[39,18,41,18],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[39,19,39,24],"value":"model"},"updates":[{"range":[40,21,41,17],"value":{"field":{"range":[40,21,40,27],"value":"player"},"expression":{"range":[40,33,40,49],"value":{"type":"application","application":[{"range":[40,33,40,40],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[40,28,40,33],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[40,34,40,40],"value":"player"}}}},{"range":[40,41,40,43],"value":{"type":"operator","operator":"|>"}},{"range":[40,44,40,49],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"stand"}}}]}}}}]}}},{"range":[41,19,41,27],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}},"else":{"range":[43,17,43,33],"value":{"type":"tupled","tupled":[{"range":[43,18,43,23],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},{"range":[43,24,43,32],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}}}}}}}}}}}},{"pattern":{"range":[45,9,45,22],"value":{"type":"named","named":{"qualified":{"moduleName":[],"name":"AnimCharge"},"patterns":[{"range":[45,20,45,22],"value":{"type":"var","var":{"value":"on"}}}]}}},"expression":{"range":[46,13,55,9],"value":{"type":"ifBlock","ifBlock":{"clause":{"range":[46,16,46,48],"value":{"type":"application","application":[{"range":[46,16,46,18],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"on"}}},{"range":[46,19,46,21],"value":{"type":"operator","operator":"&&"}},{"range":[46,34,46,39],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[46,27,46,34],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[46,22,46,27],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[46,28,46,34],"value":"player"}}}},"name":{"range":[46,35,46,39],"value":"anim"}}}},{"range":[46,40,46,42],"value":{"type":"operator","operator":"=="}},{"range":[46,43,46,48],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"Stand"}}}]}},"then":{"range":[47,17,48,64],"value":{"type":"tupled","tupled":[{"range":[47,18,48,52],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[47,19,47,24],"value":"model"},"updates":[{"range":[48,21,48,51],"value":{"field":{"range":[48,21,48,27],"value":"player"},"expression":{"range":[48,33,48,50],"value":{"type":"application","application":[{"range":[48,33,48,40],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[48,28,48,33],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[48,34,48,40],"value":"player"}}}},{"range":[48,41,48,43],"value":{"type":"operator","operator":"|>"}},{"range":[48,44,48,50],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"charge"}}}]}}}}]}}},{"range":[48,54,48,62],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}},"else":{"range":[49,18,55,9],"value":{"type":"ifBlock","ifBlock":{"clause":{"range":[49,21,49,58],"value":{"type":"application","application":[{"range":[49,21,49,24],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"not"}}},{"range":[49,25,49,27],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"on"}}},{"range":[49,28,49,30],"value":{"type":"operator","operator":"&&"}},{"range":[49,43,49,48],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[49,36,49,43],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[49,31,49,36],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[49,37,49,43],"value":"player"}}}},"name":{"range":[49,44,49,48],"value":"anim"}}}},{"range":[49,49,49,51],"value":{"type":"operator","operator":"=="}},{"range":[49,52,49,58],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"Charge"}}}]}},"then":{"range":[50,17,51,61],"value":{"type":"tupled","tupled":[{"range":[50,18,51,50],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[50,19,50,24],"value":"model"},"updates":[{"range":[51,21,51,49],"value":{"field":{"range":[51,21,51,27],"value":"player"},"expression":{"range":[51,33,51,48],"value":{"type":"application","application":[{"range":[51,33,51,40],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[51,28,51,33],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[51,34,51,40],"value":"player"}}}},{"range":[51,41,51,43],"value":{"type":"operator","operator":"|>"}},{"range":[51,44,51,48],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"jump"}}}]}}}}]}}},{"range":[51,52,51,60],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}},"else":{"range":[53,17,53,33],"value":{"type":"tupled","tupled":[{"range":[53,18,53,23],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},{"range":[53,24,53,32],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}}}}}}}}},{"pattern":{"range":[55,9,55,18],"value":{"type":"named","named":{"qualified":{"moduleName":[],"name":"Tick"},"patterns":[{"range":[55,14,55,18],"value":{"type":"var","var":{"value":"time"}}}]}}},"expression":{"range":[56,13,56,48],"value":{"type":"tupled","tupled":[{"range":[56,15,56,36],"value":{"type":"application","application":[{"range":[56,15,56,20],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},{"range":[56,21,56,23],"value":{"type":"operator","operator":"|>"}},{"range":[56,24,56,31],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"animate"}}},{"range":[56,32,56,36],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"time"}}}]}},{"range":[56,38,56,46],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}}},{"pattern":{"range":[58,9,58,22],"value":{"type":"named","named":{"qualified":{"moduleName":[],"name":"AnimAttack"},"patterns":[{"range":[58,20,58,22],"value":{"type":"var","var":{"value":"on"}}}]}}},"expression":{"range":[59,13,60,69],"value":{"type":"tupled","tupled":[{"range":[59,15,60,57],"value":{"type":"recordUpdate","recordUpdate":{"name":{"range":[59,16,59,21],"value":"model"},"updates":[{"range":[60,17,60,56],"value":{"field":{"range":[60,17,60,23],"value":"player"},"expression":{"range":[60,29,60,56],"value":{"type":"application","application":[{"range":[60,29,60,36],"value":{"type":"recordAccess","recordAccess":{"expression":{"range":[60,24,60,29],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},"name":{"range":[60,30,60,36],"value":"player"}}}},{"range":[60,37,60,39],"value":{"type":"operator","operator":"|>"}},{"range":[60,40,60,56],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["AnimState"],"name":"attack"}}}]}}}}]}}},{"range":[60,59,60,67],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}}},{"pattern":{"range":[62,9,62,10],"value":{"type":"all","all":{}}},"expression":{"range":[63,13,63,32],"value":{"type":"tupled","tupled":[{"range":[63,15,63,20],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"model"}}},{"range":[63,22,63,30],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":["Cmd"],"name":"none"}}}]}}}],"expression":{"range":[14,10,14,13],"value":{"type":"functionOrValue","functionOrValue":{"moduleName":[],"name":"msg"}}}}}}}}}}}],"comments":[]}